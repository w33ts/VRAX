# VRAX Deployment Guide

This project keeps source code in git and produces Windows binaries through GitHub Actions.
Do not commit `bin/`, `obj/`, `.exe`, or other generated artifacts.

## Release model

- Source code is versioned in git.
- Release binaries are generated by CI on Windows.
- The release asset is a single-file, self-contained `win-x64` package.

## Triggering a release

1. Merge your release-ready changes into the branch that should produce the release.
2. Create a semantic version tag:

```bash
git tag v1.0.1
git push origin v1.0.1
```

3. GitHub Actions runs `.github/workflows/release.yml`.
4. When successful, GitHub Release for that tag is created and includes a zip artifact.

## Manual build validation (maintainer)

Use this to test release behavior before tagging.

```powershell
dotnet restore VRAX.sln
dotnet publish VRAX.csproj -c Release -r win-x64 --self-contained true /p:PublishSingleFile=true /p:IncludeNativeLibrariesForSelfExtract=true /p:EnableCompressionInSingleFile=true /p:PublishTrimmed=false -o publish/win-x64
```

Validate that `publish/win-x64` contains the expected `VRAX.exe` and supporting files.

## CI and PR checks

- `.github/workflows/repo-hygiene.yml` blocks PRs/pushes that track generated artifacts.
- `.github/workflows/release.yml` is the authoritative release path for executable distribution.

## Quick troubleshooting

- If release workflow fails on restore/build, verify package feeds and .NET SDK availability.
- If startup behavior changes unexpectedly, keep `PublishTrimmed=false` for WPF compatibility.
- If antivirus flags the single-file binary, publish a release note with hash values and test from a clean VM.

## Rollback

- Delete or mark the GitHub Release as pre-release/legacy.
- Create a new patch tag (for example, `v1.0.2`) with the fix.
- Avoid reusing existing tags after publication.
